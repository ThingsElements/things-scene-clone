!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@hatiolab/things-scene")):"function"==typeof define&&define.amd?define(["exports","@hatiolab/things-scene"],e):e((t=t||self)["things-scene-clone"]={},t.scene)}(this,function(t,e){"use strict";const r={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"number",label:"duration",name:"duration",property:"duration"},{type:"string",label:"target",name:"target",property:"target"},{type:"checkbox",label:"repeat",name:"repeat",property:"repeat"},{type:"checkbox",label:"autostart",name:"autostart",property:"autostart"},{type:"number",label:"targetRetention",name:"targetRetention",property:"targetRetention"}]};class a extends(e.RectPath(e.Shape)){added(t){this.started=!1,setTimeout(()=>{this.get("autostart")&&(this.started=!0)},500)}dispose(){this.started=!1,super.dispose()}_draw(t){var{left:e,top:r,width:a,height:i}=this.bounds;t.beginPath(),t.fillStyle="black",t.strokeStyle="black",t.rect(e,r,.8*a,.8*i),t.fill(),t.stroke(),t.beginPath(),t.rect(e+.2*a,r+.2*i,.8*a,.8*i)}get nature(){return r}get started(){return this._started}set started(t){if(!!this.started!=!!t&&(this._started=!!t,this.app.isViewMode))if(this._started){var{repeat:r,duration:a,target:i,targetRetention:n}=this.model;if(!i)return;a<500&&(a=500);let t=this;requestAnimationFrame(function s(){t._started&&function(t,r,a){var i=t.root.findById(r);if(i){var n=Object.assign(i.hierarchy,{templatePrefix:"",id:""});a&&(n.retention=a);var s=e.Model.compile(n,t.app),o=i.parent.indexOf(i);return i.parent.insertComponentAt(s,o+1),s}}(t,i,n)&&a&&r?t._timeout=setTimeout(()=>{requestAnimationFrame(s)},a):t._started=!1})}else this._timeout&&(clearTimeout(this._timeout),this._timeout=0)}}e.Component.register("clone",a),t.Clone=a,Object.defineProperty(t,"__esModule",{value:!0})});
